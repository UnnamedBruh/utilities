Math Formula (i = index of sample, len = length of sound): <input type="text" id="formula"><br>
Sample Rate: <input type="number" id="sam" value="11025"><br>
Channels: <input type="number" id="ch" value="1"><br>
Number Of Samples: <input type="number" id="len" value="48000"><br>
<button id="x">Generate!</button><br>
<audio controls>
<script>
const audio = document.querySelector("audio");

function constructString() { // Compiling this to a string and execute it directly to avoid interpreter overhead (not the most secure approach)
	const formula = document.getElementById("formula").value;
	const vocab = {
		sin: "Math.sin",
		cos: "Math.cos",
		tan: "Math.tan",
		atan: "Math.atan",
		pi: "Math.PI",
		e: "Math.E",
		pow: "Math.pow"
	}
	return "let len = Math.round(sampleRate * channels * (lene / sampleRate)); for (let i = 0; i < lene; i++) {constructed[i] = " + formula.replace(/sin|cos|tan|atan|pi|e|pow/g, (match) => vocab[match]) + ";}";
}

document.getElementById("x").onclick = function() {
	const sampleRate = Math.round(Math.abs(+document.getElementById("sam").value));
	const channels = Math.round(Math.abs(+document.getElementById("ch").value));
	const lene = Math.round(Math.abs(+document.getElementById("len").value));
	const bitsPerSample = 16;

	const constructed = new Float32Array(Math.round(sampleRate * channels * (lene / sampleRate)));

	eval(constructString());

	const buffer = new DataView(new ArrayBuffer(44 + constructed.length * 2));
	buffer.setUint8(0, 82); // R
	buffer.setUint8(1, 73); // I
	buffer.setUint8(2, 70); // F
	buffer.setUint8(3, 70); // F
	buffer.setUint32(4, buffer.buffer.byteLength, true); // the file size
	buffer.setUint8(8, 87); // W
	buffer.setUint8(9, 65); // A
	buffer.setUint8(10, 86); // V
	buffer.setUint8(11, 69); // E
	buffer.setUint8(12, 102); // f
	buffer.setUint8(13, 109); // m
	buffer.setUint8(14, 116); // t
	buffer.setUint8(15, 32); // space
	buffer.setUint32(16, 16, true); // 16 for PCM audio
	buffer.setUint16(20, 1, true); // 1 for PCM audio
	buffer.setUint16(22, channels, true); // 1 = mono, 2 = stereo
	buffer.setUint32(24, sampleRate, true); // sample rate (e.g. 48000)
	buffer.setUint32(28, sampleRate * channels * (bitsPerSample / 8), true); // byterate
	buffer.setUint16(32, channels * (bitsPerSample / 8), true); // block align
	buffer.setUint16(34, bitsPerSample, true); // bits per sample
	buffer.setUint8(36, 100); // d
	buffer.setUint8(37, 97); // a
	buffer.setUint8(38, 116); // t
	buffer.setUint8(39, 97); // a
	buffer.setUint32(40, buffer.buffer.byteLength - 44, true); // the file size
	const len = constructed.length;
	for (let i = 0, j = 44; i < len; i++, j += 2) {
		buffer.setInt16(j, x[i], true);
	}
	const blob = new Blob([buffer.buffer], {type: "audio/wav"});
	audio.src = URL.createObjectURL(blob);
}
</script>
